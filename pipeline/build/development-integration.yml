parameters:
  - name: stack
    type: string
    default: netcore
    values:
    - netcore
    - java-gradle
    - java-maven
    - python
    - angular

  - name: type
    type: string
    default: api
    values:
    - api
    - worker
    - cronjob

  - name: agent
    type: string
    default: 'hosted-dockerized-linux'

  - name: unitest
    type: boolean
    default: true

  - name: component
    type: boolean
    default: false

  - name: artifact
    type: string
    default: ''

  - name: javaversion
    type: string
    default: '11'

stages:
- stage: 'development_integration'
  displayName: Development Integration Stage
  pool:
    name: ${{ parameters.agent }}
  dependsOn: []
  jobs:
    # Versionado semántico (se mantiene igual)
    - template: ../general/semantic-version-job.yml

    # Router único por stack: jobs/<stack>-job.yml
    - template: jobs/${{ parameters.stack }}-job.yml
      parameters:
        type: ${{ parameters.type }}
        unitest: ${{ parameters.unitest }}
        component: ${{ parameters.component }}
        artifact: ${{ parameters.artifact }}
        javaversion: ${{ parameters.javaversion }}
